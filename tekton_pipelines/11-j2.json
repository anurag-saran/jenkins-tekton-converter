{
  "pipeline_type": "Declarative",
  "agent": {
    "type": "any"
  },
  "environment": {
    "NODE_HOME": "/usr/local/node"
  },
  "parameters": [],
  "stages": [
    {
      "name": "Checkout",
      "agent": {
        "type": "any"
      },
      "environment": {},
      "when": null,
      "steps": [
        {
          "type": "git",
          "arguments": "https://github.com/your-repository/node-app.git",
          "script_content": null,
          "credentials_used": null
        }
      ]
    },
    {
      "name": "Build",
      "agent": {
        "type": "any"
      },
      "environment": {},
      "when": null,
      "steps": [
        {
          "type": "sh",
          "arguments": "npm install",
          "script_content": "// Install dependencies and prepare the app\n                    sh 'npm install' // Run npm install to get dependencies",
          "credentials_used": null
        }
      ]
    },
    {
      "name": "Test",
      "agent": {
        "type": "any"
      },
      "environment": {},
      "when": null,
      "steps": [
        {
          "type": "sh",
          "arguments": "npm test",
          "script_content": "// Run unit tests using Mocha (or other test frameworks)\n                    sh 'npm test' // Execute the test command",
          "credentials_used": null
        }
      ]
    },
    {
      "name": "Deploy",
      "agent": {
        "type": "any"
      },
      "environment": {},
      "when": null,
      "steps": [
        {
          "type": "sh",
          "arguments": "npm run deploy:staging",
          "script_content": "// Deploy the application to a staging environment\n                    sh 'npm run deploy:staging' // Run the deployment command for staging",
          "credentials_used": null
        }
      ]
    },
    {
      "name": "Cleanup",
      "agent": {
        "type": "any"
      },
      "environment": {},
      "when": null,
      "steps": [
        {
          "type": "echo",
          "arguments": "Cleaning up resources...",
          "script_content": null,
          "credentials_used": null
        }
      ]
    }
  ],
  "post": {
    "always": [
      {
        "type": "echo",
        "arguments": "Pipeline completed!",
        "script_content": null,
        "credentials_used": null
      }
    ],
    "success": [
      {
        "type": "echo",
        "arguments": "Deployment to staging successful!",
        "script_content": null,
        "credentials_used": null
      }
    ],
    "failure": [
      {
        "type": "echo",
        "arguments": "Pipeline failed! Check the logs for errors.",
        "script_content": null,
        "credentials_used": null
      }
    ]
  }
}