{
  "pipeline_type": "Declarative",
  "agent": {
    "type": "any"
  },
  "environment": {
    "NODE_HOME": "/usr/local/node"
  },
  "parameters": null,
  "stages": [
    {
      "name": "Checkout",
      "agent": {
        "type": "any"
      },
      "environment": null,
      "when": null,
      "steps": [
        {
          "type": "git",
          "arguments": "https://github.com/your-repository/node-app.git",
          "script_content": null,
          "credentials_used": null
        }
      ]
    },
    {
      "name": "Build",
      "agent": {
        "type": "any"
      },
      "environment": null,
      "when": null,
      "steps": [
        {
          "type": "script",
          "arguments": null,
          "script_content": "// Install dependencies and prepare the app\nsh 'npm install'",
          "credentials_used": null
        }
      ]
    },
    {
      "name": "Test",
      "agent": {
        "type": "any"
      },
      "environment": null,
      "when": null,
      "steps": [
        {
          "type": "script",
          "arguments": null,
          "script_content": "// Run unit tests using Mocha (or other test frameworks)\nsh 'npm test'",
          "credentials_used": null
        }
      ]
    },
    {
      "name": "Deploy",
      "agent": {
        "type": "any"
      },
      "environment": null,
      "when": null,
      "steps": [
        {
          "type": "script",
          "arguments": null,
          "script_content": "// Deploy the application to a staging environment\nsh 'npm run deploy:staging'",
          "credentials_used": null
        }
      ]
    },
    {
      "name": "Cleanup",
      "agent": {
        "type": "any"
      },
      "environment": null,
      "when": null,
      "steps": [
        {
          "type": "echo",
          "arguments": "Cleaning up resources...",
          "script_content": null,
          "credentials_used": null
        }
      ]
    }
  ],
  "post": {
    "always": [
      {
        "type": "echo",
        "arguments": "Pipeline completed!",
        "script_content": null,
        "credentials_used": null
      }
    ],
    "success": [
      {
        "type": "echo",
        "arguments": "Deployment to staging successful!",
        "script_content": null,
        "credentials_used": null
      }
    ],
    "failure": [
      {
        "type": "echo",
        "arguments": "Pipeline failed! Check the logs for errors.",
        "script_content": null,
        "credentials_used": null
      }
    ]
  }
}